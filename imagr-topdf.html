<div class="image-to-pdf" style="max-width:420px;margin:0 auto;font-family:'Segoe UI',Roboto,Helvetica,Arial,sans-serif;background:#f9f9f9;border-radius:12px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,0.1);">
  <h2 style="text-align:center;color:#2c3e50;margin-bottom:20px;font-weight:600;">Image to PDF Converter</h2>
  <p style="text-align:center;color:#7f8c8d;font-size:14px;margin-bottom:20px;">Convert images to PDF documents with just a few clicks</p>
  
  <div class="upload-area" id="drop-zone" style="border:2px dashed #bdc3c7;border-radius:8px;padding:30px;text-align:center;margin-bottom:20px;cursor:pointer;transition:all 0.3s;">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#e74c3c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom:10px;">
      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
      <polyline points="14 2 14 8 20 8"></polyline>
      <rect x="8" y="13" width="8" height="2" rx="1" ry="1"></rect>
      <rect x="8" y="17" width="8" height="2" rx="1" ry="1"></rect>
      <polyline points="10 9 9 9 8 9"></polyline>
    </svg>
    <p style="margin:0;color:#e74c3c;font-weight:500;">Drag & drop images or click to select</p>
    <input type="file" id="upload" accept="image/*" multiple style="display:none;">
    <p id="file-info" style="margin-top:10px;font-size:12px;color:#95a5a6;">Supports JPG, PNG, WEBP, GIF</p>
  </div>
  
  <div class="controls" style="background:#fff;border-radius:8px;padding:15px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,0.05);">
    <div style="margin-bottom:15px;">
      <label style="display:block;margin-bottom:8px;font-size:14px;font-weight:500;">Page Options</label>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px;">
        <div>
          <select id="page-size" style="width:100%;padding:8px;border-radius:6px;border:1px solid #e0e0e0;">
            <option value="a4">A4 (210×297mm)</option>
            <option value="letter">Letter (216×279mm)</option>
            <option value="a5">A5 (148×210mm)</option>
            <option value="original" selected>Original Image Size</option>
          </select>
        </div>
        <div>
          <select id="page-orientation" style="width:100%;padding:8px;border-radius:6px;border:1px solid #e0e0e0;">
            <option value="portrait">Portrait</option>
            <option value="landscape">Landscape</option>
            <option value="auto">Auto (by image)</option>
          </select>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:10px;">
        <input type="checkbox" id="fit-to-page" style="accent-color:#e74c3c;">
        <label for="fit-to-page" style="font-size:14px;">Fit image to page</label>
      </div>
    </div>
    
    <div>
      <label style="display:block;margin-bottom:8px;font-size:14px;font-weight:500;">PDF Options</label>
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
        <input type="checkbox" id="add-margin" checked style="accent-color:#e74c3c;">
        <label for="add-margin" style="font-size:14px;">Add page margins (10mm)</label>
      </div>
      <div style="display:flex;align-items:center;gap:10px;">
        <input type="checkbox" id="multi-page" checked style="accent-color:#e74c3c;">
        <label for="multi-page" style="font-size:14px;">Multiple images = Multiple pages</label>
      </div>
    </div>
  </div>
  
  <button id="convert" style="width:100%;padding:12px;background:linear-gradient(to right,#e74c3c,#c0392b);color:white;border:none;border-radius:6px;font-weight:600;cursor:pointer;transition:all 0.3s;margin-bottom:15px;">Convert to PDF</button>
  
  <div id="results" style="display:none;">
    <div style="text-align:center;background:#fff;border-radius:8px;padding:15px;margin-bottom:15px;box-shadow:0 2px 8px rgba(0,0,0,0.05);">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#27ae60" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom:10px;">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10 9 9 9 8 9"></polyline>
      </svg>
      <h3 style="margin:10px 0;color:#27ae60;">PDF Ready!</h3>
      <p id="pdf-info" style="margin:0;font-size:14px;color:#7f8c8d;"></p>
    </div>
    
    <a id="download" style="display:block;width:100%;padding:12px;background:#27ae60;color:white;text-align:center;text-decoration:none;border-radius:6px;font-weight:600;transition:all 0.3s;">
      Download PDF Document
    </a>
  </div>
  
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Image to PDF Converter",
      "description": "Free online tool to convert images to PDF documents with multiple customization options",
      "applicationCategory": "DocumentConversion",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
  </script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    // Wait for jsPDF to load
    document.addEventListener('DOMContentLoaded', function() {
      // Load jsPDF
      const { jsPDF } = window.jspdf;
      
      // DOM elements
      const uploadInput = document.getElementById('upload');
      const dropZone = document.getElementById('drop-zone');
      const fileInfo = document.getElementById('file-info');
      const pageSizeSelect = document.getElementById('page-size');
      const pageOrientationSelect = document.getElementById('page-orientation');
      const fitToPageCheckbox = document.getElementById('fit-to-page');
      const addMarginCheckbox = document.getElementById('add-margin');
      const multiPageCheckbox = document.getElementById('multi-page');
      const convertBtn = document.getElementById('convert');
      const resultsDiv = document.getElementById('results');
      const pdfInfo = document.getElementById('pdf-info');
      const downloadLink = document.getElementById('download');
      
      // Page size definitions (in mm)
      const pageSizes = {
        a4: { width: 210, height: 297 },
        letter: { width: 216, height: 279 },
        a5: { width: 148, height: 210 },
        original: null
      };
      
      // Event listeners
      dropZone.addEventListener('click', () => uploadInput.click());
      uploadInput.addEventListener('change', handleFileSelect);
      dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.style.borderColor = '#e74c3c';
        dropZone.style.backgroundColor = 'rgba(231, 76, 60, 0.1)';
      });
      dropZone.addEventListener('dragleave', () => {
        dropZone.style.borderColor = '#bdc3c7';
        dropZone.style.backgroundColor = 'transparent';
      });
      dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.style.borderColor = '#bdc3c7';
        dropZone.style.backgroundColor = 'transparent';
        if (e.dataTransfer.files.length) {
          uploadInput.files = e.dataTransfer.files;
          handleFileSelect();
        }
      });
      
      convertBtn.addEventListener('click', convertToPDF);
      
      // Functions
      function handleFileSelect() {
        if (uploadInput.files.length) {
          const count = uploadInput.files.length;
          fileInfo.textContent = `${count} ${count === 1 ? 'image' : 'images'} selected`;
          fileInfo.style.color = '#2c3e50';
          resultsDiv.style.display = 'none';
        }
      }
      
      async function convertToPDF() {
        if (!uploadInput.files || !uploadInput.files.length) {
          fileInfo.textContent = 'Please select at least one image first';
          fileInfo.style.color = '#e74c3c';
          return;
        }
        
        convertBtn.disabled = true;
        convertBtn.textContent = 'Converting...';
        
        try {
          // Initialize PDF
          let pdf = new jsPDF();
          const images = Array.from(uploadInput.files);
          const pageSize = pageSizeSelect.value;
          const orientation = pageOrientationSelect.value;
          const fitToPage = fitToPageCheckbox.checked;
          const addMargin = addMarginCheckbox.checked;
          const multiPage = multiPageCheckbox.checked;
          const margin = addMargin ? 10 : 0;
          
          let pageWidth = pageSizes.a4.width;
          let pageHeight = pageSizes.a4.height;
          
          if (pageSize !== 'original') {
            const size = pageSizes[pageSize];
            pageWidth = size.width;
            pageHeight = size.height;
            
            // Adjust for orientation
            if (orientation === 'landscape') {
              [pageWidth, pageHeight] = [pageHeight, pageWidth];
            }
          }
          
          // Process each image
          for (let i = 0; i < images.length; i++) {
            const image = images[i];
            const imageData = await readFileAsDataURL(image);
            const img = await loadImage(imageData);
            
            // Calculate dimensions
            let imgWidth = img.width;
            let imgHeight = img.height;
            let ratio = imgWidth / imgHeight;
            
            // For original size PDF
            if (pageSize === 'original') {
              pageWidth = imgWidth * 0.264583; // Convert px to mm (96dpi)
              pageHeight = imgHeight * 0.264583;
              
              // Create new PDF for each image if multi-page
              if (i > 0 && multiPage) {
                pdf.addPage([pageWidth, pageHeight]);
              } else {
                pdf = new jsPDF({
                  unit: 'mm',
                  format: [pageWidth, pageHeight]
                });
              }
              
              // Add image to PDF
              pdf.addImage(imageData, 'JPEG', 0, 0, pageWidth, pageHeight);
              continue;
            }
            
            // For standard page sizes
            if (i > 0 && multiPage) {
              pdf.addPage([pageWidth, pageHeight]);
            }
            
            // Calculate image dimensions on page
            let displayWidth = pageWidth - (margin * 2);
            let displayHeight = pageHeight - (margin * 2);
            
            if (fitToPage) {
              // Fit while maintaining aspect ratio
              if (displayWidth / displayHeight > ratio) {
                displayWidth = displayHeight * ratio;
              } else {
                displayHeight = displayWidth / ratio;
              }
            } else {
              // Use original dimensions (convert px to mm)
              displayWidth = imgWidth * 0.264583;
              displayHeight = imgHeight * 0.264583;
              
              // Auto-orientation
              if (orientation === 'auto' && displayWidth > displayHeight) {
                [pageWidth, pageHeight] = [pageHeight, pageWidth];
                pdf = new jsPDF({
                  orientation: displayWidth > displayHeight ? 'landscape' : 'portrait',
                  unit: 'mm',
                  format: [pageWidth, pageHeight]
                });
              }
            }
            
            // Center image on page
            const x = (pageWidth - displayWidth) / 2;
            const y = (pageHeight - displayHeight) / 2;
            
            // Add image to PDF
            pdf.addImage(imageData, 'JPEG', x, y, displayWidth, displayHeight);
          }
          
          // Generate PDF and create download link
          const pdfBlob = pdf.output('blob');
          const pdfUrl = URL.createObjectURL(pdfBlob);
          
          // Update UI
          pdfInfo.textContent = `PDF created with ${images.length} ${images.length === 1 ? 'image' : 'images'}`;
          downloadLink.href = pdfUrl;
          downloadLink.download = `images_${new Date().toISOString().slice(0,10)}.pdf`;
          
          // Show results
          resultsDiv.style.display = 'block';
          
          // Scroll to results
          resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          
        } catch (error) {
          console.error('Conversion error:', error);
          fileInfo.textContent = 'Error converting images to PDF';
          fileInfo.style.color = '#e74c3c';
        } finally {
          convertBtn.disabled = false;
          convertBtn.textContent = 'Convert to PDF';
        }
      }
      
      function readFileAsDataURL(file) {
        return new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result);
          reader.onerror = reject;
          reader.readAsDataURL(file);
        });
      }
      
      function loadImage(src) {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.onload = () => resolve(img);
          img.onerror = reject;
          img.src = src;
        });
      }
    });
  </script>
</div>
